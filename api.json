{
  "swagger": "2.0",
  "info": {
    "description": "An overview of API endpoints, verbs and their uses. Note: this is still in-progress and will change over time.",
    "version": "2.0.0",
    "title": "OSOC - API"
  },
  "tags": [
    {
      "name": "login",
      "description": "Everything about the login."
    },
    {
      "name": "student",
      "description": "Everything about students."
    }
  ],
  "schemes": [
    "https",
    "http"
  ],
  "paths": {
    "/login": {
      "post": {
        "tags": [
          "login"
        ],
        "description": "Attempts to log a user in into the system",
        "operationId": "login",
        "parameters": [
          {
            "in": "header",
            "name": "name",
            "description": "The name of the user to log in.",
            "required": true,
            "type": "string"
          },
          {
            "in": "header",
            "name": "pass",
            "description": "The name of the user to log in.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Sessionkey as hex string."
          }
        }
      },
      "delete": {
        "tags": [
          "login"
        ],
        "description": "Attempts to log out.",
        "operationId": "logout",
        "parameters": [
          {
            "in": "header",
            "name": "sessionkey",
            "description": "The session key of the user to log out.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Logged out."
          }
        }
      }
    },
    "/student": {
      "get": {
        "tags": [
          "student"
        ],
        "description": "Redirects towards GET /student/all.",
        "operationId": "student",
        "responses": {
          "303": {
            "description": "http HTTP/2 303 See Other Location: /student/all"
          }
        }
      },
      "post": {
        "tags": [
          "student"
        ],
        "description": "Creates a new student in the system.",
        "operationId": "create_student",
        "parameters": [
          {
            "in": "header",
            "name": "sessionkey",
            "description": "Your current session key.",
            "required": true,
            "type": "string"
          },
          {
            "in": "header",
            "name": "name",
            "description": "The name of the student.",
            "required": true,
            "type": "string"
          },
          {
            "in": "header",
            "name": "email",
            "description": "The email address of the student.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Sessionkey as hex string.",
            "schema": {
              "$ref": "#/definitions/CreateStudent"
            }
          }
        }
      }
    },
    "/student/all": {
      "get": {
        "tags": [
          "student"
        ],
        "description": "Lists all students in the system.",
        "operationId": "all_students",
        "parameters": [
          {
            "in": "header",
            "name": "sessionkey",
            "description": "Your current session key.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Sessionkey as hex string.",
            "schema": {
              "$ref": "#/definitions/AllStudents"
            }
          }
        }
      }
    },
    "/student/<student-id>": {
      "get": {
        "tags": [
          "student"
        ],
        "description": "Lists all details about the student with the given id.",
        "operationId": "student_id_get",
        "parameters": [
          {
            "in": "header",
            "name": "sessionkey",
            "description": "Your current session key. - Student ID is parsed from the URL.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Sessionkey as hex string. The 'student.labels' field can be an empty array. The 'student.sollicitation field can be an empty omitted (undefined) if the student has not yet submitted a sollicitation. The 'student.project' field can be omitted (undefined) if the student has not een assigned to a project yet.",
            "schema": {
              "$ref": "#/definitions/Student_Id"
            }
          }
        }
      },
      "post": {
        "tags": [
          "student"
        ],
        "description": "Modifies the details of the student.",
        "operationId": "student_id_post",
        "parameters": [
          {
            "in": "header",
            "name": "sessionkey",
            "description": "Your current session key. - Student ID is parsed from the URL. Student ID is parsed from the URL. - Any of the fields in the student field of the response for GET /student/<student-id> can be modified by adding it to the arguments (without the student. prefix). For the project field, you can only specify the project ID. Any values passed to labels or sollicitations (both are lists) are added to the list. If a value starting with - (a single minus sign) is passed in the labels or sollicitations list, those values are removed from the lists.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "The student field contains all updated fields. If no field is updated, an Argument error is thrown.",
            "schema": {
              "$ref": "#/definitions/Student_Id_Modify"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "NameId": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "xml": {
        "name": "NameId"
      }
    },
    "NameIdList": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/NameId"
      },
      "xml": {
        "name": "NameIdList"
      }
    },
    "CreateStudent": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/NameId"
        },
        "sessionkey": {
          "type": "string"
        }
      },
      "xml": {
        "name": "CreateStudent"
      }
    },
    "AllStudents": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/NameIdList"
        },
        "sessionkey": {
          "type": "string"
        }
      },
      "xml": {
        "name": "AllStudents"
      }
    },
    "Student_Id_contract": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "info": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Student_Id_contract"
      }
    },
    "Student_Id_project": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "contract": {
          "$ref": "#/definitions/Student_Id_contract"
        },
        "roles": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "xml": {
        "name": "Student_Id_project"
      }
    },
    "Student_Id_data": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "labels": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "sollicitation": {
          "type": "string"
        },
        "project": {
          "$ref": "#/definitions/Student_Id_project"
        }
      },
      "xml": {
        "name": "Student_Id_data"
      }
    },
    "Student_Id": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/Student_Id_data"
        },
        "sessionkey": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Student_Id"
      }
    },
    "Student_Id_Modify": {
      "type": "object",
      "properties": {
        "data": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string"
            }
          }
        },
        "sessionkey": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Student_Id_Modify"
      }
    }
  }
}